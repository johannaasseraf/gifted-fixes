(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[54,23],{153:function(t,e,n){"use strict";n.r(e),n.d(e,"platformWorkerPromise",(function(){return p}));var r=n(0),o=window.viewerModel,i=o.requestUrl,a=o.siteAssets.clientTopology,c=o.siteFeatures,s=o.siteFeaturesConfigs.platform,u=c.includes("platform"),l=!i.includes("experiments=runPlatformInMainThread");function f(){return Object(r.b)(this,void 0,void 0,(function(){var t,e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return[4,fetch(s.clientWorkerUrl)];case 1:return t=n.sent(),[4,new Response(t.body).blob()];case 2:return e=n.sent(),[2,URL.createObjectURL(e)]}}))}))}var p=u&&l?function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e,n,o,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return t="platform_create-worker started",performance.mark(t),(e=s.clientWorkerUrl).startsWith("http://localhost:4200/")||e.startsWith("https://bo.wix.com/suricate/")?[4,f()]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=e.replace(a.fileRepoUrl,"/_partials/"),r.label=3;case 3:return o=new Worker(n),i="platform_create-worker ended",performance.mark(i),performance.measure("Create Platform Web Worker",t,i),[2,o]}}))}))}():Promise.resolve()},489:function(t,e,n){"use strict";(function(t,e){var r;(r=void 0!==t&&"[object process]"==={}.toString.call(t)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?e:self).Proxy||(r.Proxy=n(491)(),r.Proxy.revocable=r.Proxy.revocable)}).call(this,n(490),n(32))},490:function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,u=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&d())}function d(){if(!l){var t=c(p);l=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function b(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new b(t,e)),1!==u.length||l||c(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},491:function(t,e){t.exports=function(){var t,e=null;function n(t){return!!t&&("object"==typeof t||"function"==typeof t)}return(t=function(t,r){if(!n(t)||!n(r))throw new TypeError("Cannot create proxy with a non-object as target or handler");var o=function(){};e=function(){t=null,o=function(t){throw new TypeError("Cannot perform '"+t+"' on a proxy that has been revoked")}},setTimeout((function(){e=null}),0);var i=r;for(var a in r={get:null,set:null,apply:null,construct:null},i){if(!(a in r))throw new TypeError("Proxy polyfill does not support trap '"+a+"'");r[a]=i[a]}"function"==typeof i&&(r.apply=i.apply.bind(i));var c=this,s=!1,u=!1;"function"==typeof t?(c=function(){var e=this&&this.constructor===c,n=Array.prototype.slice.call(arguments);if(o(e?"construct":"apply"),e&&r.construct)return r.construct.call(this,t,n);if(!e&&r.apply)return r.apply(t,this,n);if(e){n.unshift(t);var i=t.bind.apply(t,n);return new i}return t.apply(this,n)},s=!0):t instanceof Array&&(c=[],u=!0);var l=r.get?function(t){return o("get"),r.get(this,t,c)}:function(t){return o("get"),this[t]},f=r.set?function(t,e){o("set");r.set(this,t,e,c)}:function(t,e){o("set"),this[t]=e},p=Object.getOwnPropertyNames(t),d={};p.forEach((function(e){if(!s&&!u||!(e in c)){var n={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:l.bind(t,e),set:f.bind(t,e)};Object.defineProperty(c,e,n),d[e]=!0}}));var b=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(c,Object.getPrototypeOf(t)):c.__proto__?c.__proto__=t.__proto__:b=!1,r.get||!b)for(var g in t)d[g]||Object.defineProperty(c,g,{get:l.bind(t,g)});return Object.seal(t),Object.seal(c),c}).revocable=function(n,r){return{proxy:new t(n,r),revoke:e}},t}},722:function(t,e,n){"use strict";n.r(e),n.d(e,"site",(function(){return N}));var r=n(29),o=n(52),i=n(277),a=n(0),c=n(15),s=n.n(c),u=n(6),l=n(36),f=n(247),p=n(7),d=n(278),b=n(24),g=n(30),v=n(349),m=n(341),h=n(344),O=n(89),y=n(241),j=n(342),w=n(350),I=n(20),P=n(155),S=Object(p.h)([i.a,Object(p.f)(g.e,i.b),r.p,v.b,r.f,m.b,h.a,O.a,r.b,y.a,u.g,r.e,j.a,u.d,b.a,Object(p.g)(f.a),l.a,r.i,Object(p.e)(r.q),I.a,Object(p.e)(r.g),w.a,Object(p.g)(P.a)],(function(t,e,n,o,i,c,u,l,f,p,b,g,v,m,h,O,y,j,w,I,P,S,k){var x=w.map((function(t){return t.getSdkHandlers()}));function E(t){var e=t.getAllImplementersOf(r.q).map((function(t){return t.getSdkHandlers()}));return Object.assign.apply(Object,Object(a.g)([{}],e,x))}var _=n.siteFeaturesConfigs,T=n.rollout,C=n.siteAssets,W=n.deviceInfo,A=n.site,L=A.externalBaseUrl,R=A.siteRevision,D=n.mode,H=e.bootstrapData,U=e.landingPageId,F=e.isChancePlatformOnLandingPage,B=e.debug.disablePlatform,M=null==O?void 0:O.getPopupPages();H.platformServicesAPIData.link.popupPages=M;var V,q=s.a.pickBy(_,(function(t,e){return e.toLowerCase().includes("wixcodesdk")})),N=Object(a.a)(Object(a.a)({},s.a.omit(c,"checkVisibility")),{visitorId:h.getVisitorId(),siteMemberId:h.getSiteMemberId(),viewerVersion:f.thunderboltVersion,rolloutData:T}),J=Object(d.c)(f),X=Object(a.a)(Object(a.a)({},C),{deviceInfo:W,siteAssetsClientConfig:u.getInitConfig(),qaMode:D.qa}),z=0;return{registerWixCodeSdkParams:function(t){V=t},appWillLoadPage:function(e){var n,r=e.pageId,o=e.contextId;return Object(a.b)(this,void 0,void 0,(function(){var e,c,u,l,f,d,g,O,w,x,_,T,C,W,A=this;return Object(a.d)(this,(function(G){switch(G.label){case 0:return(e=!!M&&M[r])||z++,B||r===U&&!F?[2]:(c=p.getCurrentRouteInfo(),u=b.getParsedUrl(),l=u.href,f=u.searchParams,d=f.has("suppressbi")&&"false"!==f.get("suppressbi"),g=(D.qa||d)&&!v.sv_reportTrace,(O=g||e||1!==z)||i.interactionStarted("platform"),w=Promise.all([y(o),y("masterPage")]).then((function(t){var e=Object(a.e)(t,2),n=e[0];return{masterPageHandlers:E(e[1]),pageHandlers:E(n)}})),x=s.a.mapValues(V,"initialState"),_={pageNumber:z,pageId:r,pageUrl:l,isLightbox:e},T=h.getAllInstances(),C=Object(a.a)({externalBaseUrl:L,routingInfo:m.getLinkUtilsRoutingInfo(),csrfToken:J,siteRevision:R,currentPageId:r,currentContextId:o,pageJsonFileName:(null==c?void 0:c.pageJsonFileName)||"",wixCodeSdkProviderData:x,siteAssetsClientInitParams:X,experiments:v,applicationsInstances:T,mode:D,commonConfig:I.getCommonConfig(),storageInitData:j.getStore(),routerReturnedData:null!==(n=null==c?void 0:c.dynamicRouteData)&&void 0!==n?n:null,platformEnvData:Object(a.a)({bi:Object(a.a)(Object(a.a)({},N),{pageData:_,muteBi:g,muteFedops:O})},Object.assign.apply(Object,Object(a.g)([{}],P.map((function(t){return t.platformEnvData}))))),sdkFactoriesSiteFeatureConfigs:q},H),W={updateProps:function(e){t.updateProps(e)},updateStyles:function(e){var n=s()({}).merge(S.getAllStyles(),e).mapValues((function(t){return s.a.omitBy(t,s.a.isNil)})).omitBy(s.a.isEmpty).value();t.updateStyles(n)},invokeSdkHandler:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return Object(a.b)(A,void 0,void 0,(function(){var r,c,u,l;return Object(a.d)(this,(function(f){switch(f.label){case 0:return[4,w];case 1:return r=f.sent(),c=r.masterPageHandlers,u=r.pageHandlers,l="masterPage"===t?c:u,s.a.isFunction(l[e])?[2,l[e].apply(l,Object(a.g)(n))]:(i.captureError(new Error("handler does not exists in page"),{tags:{platform:!0},extra:{functionName:e,pageId:t,contextId:o}}),[2])}}))}))}},k&&k.platform.logBootstrapMessage(o,C),[4,t.init(C,W)]);case 1:return G.sent(),O||i.interactionEnded("platform"),[2]}}))}))}}}));var k=Object(p.h)([r.j,Object(p.e)(r.r)],(function(t,e){return t.registerWixCodeSdkParams(Object.assign.apply(Object,Object(a.g)([{}],e))),{appWillMount:function(){}}})),x=function(){function t(){}return t.prototype.setItem=function(t,e){s.a.set(this,t,String(e))},t.prototype.getItem=function(t){return s.a.get(this,t)},t.prototype.removeItem=function(t){s.a.set(this,t,void 0)},t.prototype.getStorage=function(){return this},t}();var E="platform_app_";function _(t){var e,n,r={},o=Object.keys(t).filter((function(t){return"string"==typeof t&&s.a.startsWith(t,E)}));try{for(var i=Object(a.h)(o),c=i.next();!c.done;c=i.next()){var u=c.value;s.a.set(r,u.replace(E,""),t.getItem(u))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var T=Object(p.h)([r.b],(function(t){var e,n=function(t){try{return t.localStorage.setItem("",""),t.localStorage.removeItem(""),!0}catch(t){return!1}}(t),r=new x,o=n?(e=t,{setItem:function(t,n){e.sessionStorage.setItem(t,n)},getItem:function(t){return e.sessionStorage.getItem(t)},removeItem:function(t){e.sessionStorage.removeItem(t)},getStorage:function(){return e.sessionStorage}}):new x,i=n?function(t){return{setItem:function(e,n){t.localStorage.setItem(e,n)},getItem:function(e){return t.localStorage.getItem(e)},removeItem:function(e){t.localStorage.removeItem(e)},getStorage:function(){return t.localStorage}}}(t):new x;return{getSdkHandlers:function(){return{memorySetItem:function(t,e){r.setItem(E+t,e)},sessionSetItem:function(t,e){o.setItem(E+t,e)},localSetItem:function(t,e){i.setItem(E+t,e)}}},getStore:function(){return{local:_(i.getStorage()),session:_(o.getStorage())}}}})),C=Object(p.h)([y.a,u.g],(function(t,e){return{get platformEnvData(){var n=t.getCurrentRouteInfo();return{location:{rawUrl:e.getParsedUrl().href},routerData:null==n?void 0:n.dynamicRouteData}}}})),W=Object(p.h)([r.b],(function(t){return{platformEnvData:{window:{isSSR:Object(d.e)(t),browserLocale:Object(d.a)(t)}}}})),A=Object(p.h)([r.b],(function(t){return{platformEnvData:{document:{referrer:Object(d.b)(t)}}}})),L=n(90),R=Object(p.h)([L.a,O.a,r.k,r.h],(function(t,e,n,r){function o(t){if(void 0===t&&(t=[]),t[0]&&t[0].nativeEvent instanceof Event){var e=Object(a.e)(t),n=e[0],r=e.slice(1),o=n.nativeEvent,i=s.a.omitBy(n,s.a.isObject);return i.nativeEvent=s.a.omitBy(o,s.a.isObject),Object(a.g)([i],r)}return t}return{getSdkHandlers:function(){var i=this;return{invokeCompRefFunction:function(e,n,r){return Object(a.b)(i,void 0,void 0,(function(){var o;return Object(a.d)(this,(function(i){switch(i.label){case 0:return[4,t.getCompRefById(e)];case 1:return[2,(o=i.sent())[n].apply(o,Object(a.g)(r))]}}))}))},registerEvent:function(t,i,c){var s=this;["onViewportLeave","onViewportEnter"].includes(i)?n[i](t,c):e.register(t,i,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.b)(s,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=o(t),[4,r.waitForPlatformPropsSyncToApply()];case 1:return n.sent(),c(e),[2]}}))}))}))}}}}})),D=n(91),H=function(){var t=window.document.getElementById("WIX_ADS");return t?{rootMargin:"-"+t.offsetHeight+"px 0px 0px 0px"}:{}},U=Object(p.h)([w.a,D.a],(function(t,e){var n,r=[],o=function(t){return document.querySelectorAll("#"+t+', [id^="'+t+'__"]')},i=function(t){return Object(a.b)(void 0,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return(n=o(t)).length?[2,n]:[4,e.waitForComponentToRender(t)];case 1:return r.sent(),[2,o(t)]}}))}))};return{onViewportEnter:function(e,o){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,i(e)];case 1:a.sent().forEach((function(e){return function(e){var o=e.target,i=e.cb,a=e.displayedId;n=n||H();var c=new window.IntersectionObserver((function(e){e.filter((function(t){return t.target.id===a})).forEach((function(e){var n=e.isIntersecting,r=t.isHidden(a);n&&!r&&i([{type:"viewportEnter",compId:a}])}))}),n);r.push(c),c.observe(o)}({target:e,cb:o,displayedId:e.id})})),a.label=2;case 2:return[2]}}))}))},onViewportLeave:function(e,o){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,i(e)];case 1:a.sent().forEach((function(e){return function(e){var o=e.target,i=e.cb,a=e.displayedId;n=n||H();var c=!0,s=new window.IntersectionObserver((function(e){e.filter((function(t){return t.target.id===a})).forEach((function(e){var n=e.isIntersecting,r=t.isHidden(a);n||r||c||i([{type:"viewportLeave",compId:a}]),c=!1}))}),n);r.push(s),s.observe(o)}({target:e,cb:o,displayedId:e.id})})),a.label=2;case 2:return[2]}}))}))},appWillLoadPage:function(){r.forEach((function(t){return t.disconnect()}))}}}));n(489);var F,B=n(415),M=n(19),V=n(153),q=Object(p.h)([M.d,r.a,v.b,r.b,w.a],(function(t,e,n,r,o){return{init:function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,V.platformWorkerPromise];case 1:return n=r.sent(),[2,Object(B.e)(n)(t,Object(B.b)(e.updateProps),Object(B.b)(e.invokeSdkHandler),Object(B.b)(e.updateStyles))]}}))}))},updateProps:function(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(o){switch(o.label){case 0:return!0===r.clientSideRender?[3,2]:[4,e];case 1:o.sent(),o.label=2;case 2:return n.update(t),[2]}}))}))},updateStyles:function(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return!0===r.clientSideRender?[3,2]:[4,e];case 1:n.sent(),n.label=2;case 2:return o.set(t),[2]}}))}))},appWillMount:function(){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,t.getWarmupData("platform")];case 1:return null==(e=r.sent())||e.ssrPropsUpdates.forEach(n.update),null==e||e.ssrStyleUpdates.forEach(o.set),[2]}}))}))}}})),N=(F=q,{site:function(t){t(r.j,o.a.AppWillLoadPageHandler).to(S),t(r.i,r.q).to(T),t(r.q).to(R),t(r.k,o.a.AppWillLoadPageHandler).to(U),t(o.a.AppWillMountHandler).to(k),t(r.g).to(C),t(r.g).to(W),t(r.g).to(A),t(i.a,o.a.AppWillMountHandler).to(F),t(r.l).toConstantValue(n(153))}}).site}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/platform.f8d846b9.chunk.min.js.map